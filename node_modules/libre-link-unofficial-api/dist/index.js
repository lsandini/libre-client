var v=process?.env?.LIBRE_LINK_API_URL??"https://api-us.libreview.io",y=process?.env?.LIBRE_LINK_EMAIL,B=process?.env?.LIBRE_LINK_PASSWORD,P=process?.env?.LIBRE_LINK_UP_VERSION??"4.7.0",K=process?.env?.LIBRE_LINK_PATIENT_ID,N=process?.env?.VERBOSE==="true",Y=Object.freeze({apiUrl:v,patientId:K,credentials:{email:y,password:B},lluVersion:P,verbose:N});var Z;(function(Q){Q["Login"]="llu/auth/login";Q["Country"]="llu/config/country?country=DE";Q["Connections"]="llu/connections"})(Z||(Z={}));var H;(function(J){J[J["Red"]=0]="Red";J[J["Green"]=1]="Green";J[J["Yellow"]=2]="Yellow";J[J["Orange"]=3]="Orange"})(H||(H={}));var X;(function(F){F[F["NotComputable"]=0]="NotComputable";F[F["SingleDown"]=1]="SingleDown";F[F["FortyFiveDown"]=2]="FortyFiveDown";F[F["Flat"]=3]="Flat";F[F["FortyFiveUp"]=4]="FortyFiveUp";F[F["SingleUp"]=5]="SingleUp"})(X||(X={}));var k=[X.NotComputable,X.SingleDown,X.FortyFiveDown,X.Flat,X.FortyFiveUp,X.SingleUp],W=["NotComputable","SingleDown","FortyFiveDown","Flat","FortyFiveUp","SingleUp"];var V=(F)=>({...F,created:q(F.created),lastLogin:q(F.lastLogin),dateOfBirth:q(F.dateOfBirth)}),q=(F)=>new Date(F*1000),D=(F,x)=>{const z=F.ValueInMgPerDl,Q=x.targetHigh<z,J=x.targetLow>z;return Object.freeze({timestamp:new Date(F.Timestamp),value:z,measurementColor:F.MeasurementColor,isHigh:Q,isLow:J,trend:w(F.TrendArrow)})};var w=(F,x=X.Flat)=>F??x;var A=Object.freeze({targetHigh:150,targetLow:70});class j{F;x;timestamp;value;measurementColor;isHigh;isLow;trend;constructor(F,x=A){this._raw=F;this._options=x;const z=D(F,x);this.value=z.value,this.timestamp=z.timestamp,this.measurementColor=z.measurementColor,this.isHigh=z.isHigh,this.isLow=z.isLow,this.trend=z.trend}get mmol(){return(this.value/18).toFixed(1)}get mgDl(){return this.value}get trendType(){return W[this.trend]}}class S{F;apiUrl=Y.apiUrl;accessToken=null;patientId=Y.patientId||null;cache=new Map;constructor(F=G){this.options=F;if(!F?.email&&!Y.credentials.email)throw new Error("Libre Link Up credentials are missing.");if(F?.patientId)this.patientId=F.patientId;this.options={...G,...F}}get me(){if(!this.cache.has("user"))throw new Error("User data is not available. Please log in first.");return this.cache.get("user")}async login(){const F=this.options?.email||Y.credentials.email,x=this.options?.password||Y.credentials.password;try{const z=await this._fetcher(Z.Login,{method:"POST",body:JSON.stringify({email:F,password:x})});if(z.status===2)throw new Error("Invalid credentials. Please ensure that the email and password work with the LibreLinkUp app.");if(!z.data)throw new Error("No data returned from Libre Link Up API.");if("redirect"in z.data){this.verbose("Redirecting to region:",z.data.region);const Q=await this.findRegion(z.data.region);return this.apiUrl=Q,await this.login()}return this.accessToken=z.data.authTicket?.token,this.setCache("user",V(z.data.user)),this.verbose("Logged into Libre Link Up API."),z}catch(z){const Q=z;throw console.error(Q),new Error(`Error logging into Libre Link Up API. ${Q.message}`)}}async read(){try{const F=await this.fetchReading();return new j(F.data?.connection.glucoseItem,F.data.connection)}catch(F){const x=F;throw console.error(x),new Error(`Error reading data from Libre Link Up API. ${x.message}`)}}async history(){try{const F=await this.fetchReading();return F.data.graphData.map((z)=>new j(z,F.data.connection))}catch(F){const x=F;throw console.error(x),new Error(`Error reading data from Libre Link Up API. ${x.message}`)}}async*stream(F=90000){while(!0)try{yield await this.read(),await new Promise((z)=>setTimeout(z,F))}catch(x){throw console.error("Error fetching reading:",x),x}}async fetchReading(){try{const F=await this.getPatientId(),x=await this._fetcher(`${Z.Connections}/${F}/graph`);return this.verbose("Fetched reading from Libre Link Up API.",JSON.stringify(x,null,2)),x}catch(F){const x=F;throw console.error(x),new Error(`Error fetching reading from Libre Link Up API. ${x.message}`)}}async fetchConnections(){try{if(this.cache.has("connections"))return this.cache.get("connections");const F=await this._fetcher(Z.Connections);if(this.verbose(`Fetched ${F?.data?.length} connections from Libre Link Up API.`,JSON.stringify(F,null,2)),F?.data?.length)this.setCache("connections",F);return F}catch(F){const x=F;throw console.error(x),new Error(`Error fetching connections from Libre Link Up API. ${x.message}`)}}async getPatientId(){const F=await this.fetchConnections();if(!F.data?.length)throw new Error("No connections found. Please ensure that you have a connection with the LibreLinkUp app.");let x=F.data[0].patientId;if(this.patientId)F.data.find((z)=>z.patientId===this.patientId)?.patientId;if(!x)throw new Error(`Patient ID not found in connections. (${this.patientId})`);return this.verbose("Using patient ID:",x),x}async findRegion(F){try{const z=(await this._fetcher(Z.Country)).data?.regionalMap[F]?.lslApi;if(!z)throw new Error("Region not found in Libre Link Up API.");return z}catch(x){const z=x;throw console.error(z),new Error(`Error finding region in Libre Link Up API. ${z.message}`)}}async _fetcher(F,x={headers:{}}){const z=new Headers({...x.headers,Authorization:this.accessToken?`Bearer ${this.accessToken}`:"",product:"llu.android",version:Y.lluVersion,"accept-encoding":"gzip","cache-control":"no-cache",connection:"Keep-Alive","content-type":"application/json"}),Q=Object.freeze({...x,headers:z});try{const J=await fetch(`${this.apiUrl}/${F}`,Q);if(this.verbose(`[${F}] (${J.status})`,"Response from Libre Link Up API",JSON.stringify(J,null,2)),!J.ok){if(J.status===429)throw new Error("Too many requests. Please wait before trying again.");throw new Error(`Error fetching data from Libre Link Up API. Status: ${J.status}`)}const $=await J.json();return this.verbose(`[${F}]`,"Data from Libre Link Up API",JSON.stringify($,null,2)),$}catch(J){const $=J;throw console.error($),new Error(`Error fetching connections from Libre Link Up API. ${$.message}`)}}verbose(...F){if(Y.verbose)console.log(...F)}setCache(F,x){if(!this.options.cache)return;this.cache.set(F,x)}clearCache(){this.cache.clear()}}var G={cache:!0};export{S as LibreLinkClient,j as GlucoseReading};

//# debugId=8D9297CC2AE814FF64756e2164756e21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvbmZpZy50cyIsICIuLi9zcmMvdHlwZXMudHMiLCAiLi4vc3JjL2NvbnN0YW50cy50cyIsICIuLi9zcmMvdXRpbHMudHMiLCAiLi4vc3JjL3V0aWxzLnRzIiwgIi4uL3NyYy9yZWFkaW5nLnRzIiwgIi4uL3NyYy9jbGllbnQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiXG5jb25zdCBMSUJSRV9MSU5LX0FQSV9VUkwgPSBwcm9jZXNzPy5lbnY/LkxJQlJFX0xJTktfQVBJX1VSTCA/PyBcImh0dHBzOi8vYXBpLXVzLmxpYnJldmlldy5pb1wiO1xuY29uc3QgTElCUkVfTElOS19FTUFJTCA9IHByb2Nlc3M/LmVudj8uTElCUkVfTElOS19FTUFJTDtcbmNvbnN0IExJQlJFX0xJTktfUEFTU1dPUkQgPSBwcm9jZXNzPy5lbnY/LkxJQlJFX0xJTktfUEFTU1dPUkQ7XG5jb25zdCBMSUJSRV9MSU5LX1VQX1ZFUlNJT04gPSBwcm9jZXNzPy5lbnY/LkxJQlJFX0xJTktfVVBfVkVSU0lPTiA/PyBcIjQuNy4wXCI7XG5jb25zdCBMSUJSRV9MSU5LX1BBVElFTlRfSUQgPSBwcm9jZXNzPy5lbnY/LkxJQlJFX0xJTktfUEFUSUVOVF9JRDtcbmNvbnN0IFZFUkJPU0UgPSBwcm9jZXNzPy5lbnY/LlZFUkJPU0UgPT09IFwidHJ1ZVwiO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDb25maWd1cmF0aW9uIGZvciB0aGUgTGlicmUgTGluayBVcCBBUEkgY2xpZW50LlxuICovXG5leHBvcnQgY29uc3QgY29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgYXBpVXJsOiBMSUJSRV9MSU5LX0FQSV9VUkwsXG4gICAgcGF0aWVudElkOiBMSUJSRV9MSU5LX1BBVElFTlRfSUQsXG4gICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IExJQlJFX0xJTktfRU1BSUwsXG4gICAgICAgIHBhc3N3b3JkOiBMSUJSRV9MSU5LX1BBU1NXT1JEXG4gICAgfSxcbiAgICBsbHVWZXJzaW9uOiBMSUJSRV9MSU5LX1VQX1ZFUlNJT04sXG4gICAgdmVyYm9zZTogVkVSQk9TRVxufSk7IiwKICAiZXhwb3J0IGVudW0gTGlicmVMaW5rVXBFbmRwb2ludHMge1xuICBMb2dpbiA9IFwibGx1L2F1dGgvbG9naW5cIixcbiAgQ291bnRyeSA9IFwibGx1L2NvbmZpZy9jb3VudHJ5P2NvdW50cnk9REVcIixcbiAgQ29ubmVjdGlvbnMgPSBcImxsdS9jb25uZWN0aW9uc1wiLFxufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBBIHJlc3BvbnNlIGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpYnJlUmVzcG9uc2Uge1xuICBzdGF0dXM6IG51bWJlcixcbiAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGVycm9yPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gVGhlIHN1Y2Nlc3NmdWwgbG9naW4gcmVzcG9uc2UgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlicmVMb2dpblJlc3BvbnNlIGV4dGVuZHMgTGlicmVSZXNwb25zZSB7XG4gIGRhdGE6IHtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlIHVzZXIgb2JqZWN0IGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLlxuICAgICAqL1xuICAgIHVzZXI6IExpYnJlVXNlcjtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlIG1lc3NhZ2VzIGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLiBVc3VhbGx5IG9ubHkgdGhlIGNvdW50IG9mIHVucmVhZCBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICBtZXNzYWdlczogTGlicmVEYXRhTWVzc2FnZXM7XG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFRoZSBub3RpZmljYXRpb25zIGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLiBVc3VhbGx5IG9ubHkgdGhlIGNvdW50IG9mIHVucmVzb2x2ZWQgbm90aWZpY2F0aW9ucy5cbiAgICAgKi9cbiAgICBub3RpZmljYXRpb25zOiBMaWJyZU5vdGlmaWNhdGlvbnM7XG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFRoZSBhdXRoZW50aWNhdGlvbiB0aWNrZXQgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuIFRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiBpcyBzdG9yZWQgaGVyZS5cbiAgICAgKi9cbiAgICBhdXRoVGlja2V0OiBMaWJyZUF1dGhUaWNrZXQ7XG4gICAgXG4gICAgaW52aXRhdGlvbnM6IHN0cmluZ1tdIHwgbnVsbDtcbiAgICB0cnVzdGVkRGV2aWNlVG9rZW46IHN0cmluZyB8IFwiXCI7XG4gIH07XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBUaGUgcmVkaXJlY3QgcmVzcG9uc2UgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuIFVzdWFsbHkgaGFwcGVucyB3aGVuIGF0dGVtcHRpbmcgdG8gbG9nIGluIHdpdGggdGhlIHdyb25nIHJlZ2lvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaWJyZVJlZGlyZWN0UmVzcG9uc2UgZXh0ZW5kcyBMaWJyZVJlc3BvbnNlIHtcbiAgZGF0YToge1xuICAgIHJlZGlyZWN0OiBib29sZWFuO1xuICAgIHJlZ2lvbjogc3RyaW5nO1xuICB9O1xufTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gQW4gZXJyb3IgcmVzcG9uc2UgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlicmVFcnJvclJlc3BvbnNlIGV4dGVuZHMgTGlicmVSZXNwb25zZSB7XG4gIGVycm9yOiB7XG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICB9O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBMaWJyZUNvbm5lY3Rpb25SZXNwb25zZSBleHRlbmRzIExpYnJlUmVzcG9uc2Uge1xuICBzdGF0dXM6IG51bWJlcjtcbiAgZGF0YToge1xuICAgIGNvbm5lY3Rpb246IExpYnJlQ29ubmVjdGlvbjtcbiAgICBhY3RpdmVTZW5zb3JzOiBMaWJyZUFjdGl2ZVNlbnNvcltdO1xuICAgIGdyYXBoRGF0YTogUmF3R2x1Y29zZVJlYWRpbmdbXTtcbiAgfTtcbiAgdGlja2V0OiBUaWNrZXQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlicmVBY3RpdmVTZW5zb3Ige1xuICBzZW5zb3I6IExpYnJlU2Vuc29yO1xuICBkZXZpY2U6IExpYnJlRGV2aWNlO1xufVxuXG5pbnRlcmZhY2UgTGlicmVEZXZpY2Uge1xuICBkaWQ6IHN0cmluZztcbiAgZHRpZDogbnVtYmVyO1xuICB2OiBzdHJpbmc7XG4gIGxsOiBudW1iZXI7XG4gIGhsOiBudW1iZXI7XG4gIHU6IG51bWJlcjtcbiAgZml4ZWRMb3dBbGFybVZhbHVlczogTGlicmVGaXhlZExvd0FsYXJtVmFsdWVzO1xuICBhbGFybXM6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBMaWJyZUZpeGVkTG93QWxhcm1WYWx1ZXMge1xuICBtZ2RsOiBudW1iZXI7XG4gIG1tb2xsOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBMaWJyZVNlbnNvciB7XG4gIGRldmljZUlkOiBzdHJpbmc7XG4gIHNuOiBzdHJpbmc7XG4gIGE6IG51bWJlcjtcbiAgdzogbnVtYmVyO1xuICBwdDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBBIGNvbm5lY3Rpb24gb2JqZWN0IGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpYnJlQ29ubmVjdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHBhdGllbnRJZDogc3RyaW5nO1xuICBjb3VudHJ5OiBzdHJpbmc7XG4gIHN0YXR1czogbnVtYmVyO1xuICBmaXJzdE5hbWU6IHN0cmluZztcbiAgbGFzdE5hbWU6IHN0cmluZztcbiAgdGFyZ2V0TG93OiBudW1iZXI7XG4gIHRhcmdldEhpZ2g6IG51bWJlcjtcbiAgdW9tOiBudW1iZXI7XG4gIHNlbnNvcjogTGlicmVTZW5zb3I7XG4gIGFsYXJtUnVsZXM6IExpYnJlQWxhcm1SdWxlcztcbiAgZ2x1Y29zZU1lYXN1cmVtZW50OiBSYXdHbHVjb3NlUmVhZGluZztcbiAgZ2x1Y29zZUl0ZW06IFJhd0dsdWNvc2VSZWFkaW5nO1xuICBnbHVjb3NlQWxhcm06IG51bGw7XG4gIHBhdGllbnREZXZpY2U6IExpYnJlRGV2aWNlO1xuICBjcmVhdGVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEEgdXNlciBvYmplY3QgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlicmVVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gIGxhc3ROYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGRhdGVPZkJpcnRoOiBEYXRlO1xuICAvKiogQ291bnRyeSBvZiB0aGUgdXNlciBpbiBhbHBoYS0yIGZvcm1hdC4gZWcuIFBMLCBERSwgR0IgZXRjLiAqL1xuICBjb3VudHJ5OiBzdHJpbmc7XG4gIC8qKiBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIHVzZXIgaW50ZXJmYWNlIGluIGN1bHR1cmUgY29kZSBmb3JtYXQuIGVnLiBlbi1HQiwgZGUtREUsIHBsLVBMIGV0Yy4gKi9cbiAgdWlMYW5ndWFnZTogc3RyaW5nO1xuICAvKiogVGhlIGxhbmd1YWdlIHRoZSBzeXN0ZW0gdXNlcyB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSB1c2VyICg/KSBpbiBjdWx0dXJlIGNvZGUgZm9ybWF0LiBlZy4gZW4tR0IsIGRlLURFLCBwbC1QTCBldGMuICovXG4gIGNvbW11bmljYXRpb25MYW5ndWFnZTogc3RyaW5nO1xuICAvKiogVGhlIGFjY291bnQgdHlwZSBvZiB0aGUgdXNlci4gRm9yIHBhdGllbnQgaXQncyAncGF0Jy4gKi9cbiAgYWNjb3VudFR5cGU6IHN0cmluZztcbiAgY3JlYXRlZDogRGF0ZTtcbiAgbGFzdExvZ2luOiBEYXRlO1xuICB1b206IHN0cmluZztcbiAgZGF0ZUZvcm1hdDogc3RyaW5nO1xuICB0aW1lRm9ybWF0OiBzdHJpbmc7XG4gIGVtYWlsRGF5OiBudW1iZXJbXTtcbiAgc3lzdGVtOiBMaWJyZVN5c3RlbTtcbiAgZGV0YWlsczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgcHJvZ3JhbXM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIC8qKiBUaGUgcHJhY3RpY2VzIHRoYXQgY2FuIGFjY2VzcyB0aGUgdXNlcidzIGRhdGEuICovXG4gIHByYWN0aWNlczogUmVjb3JkPHN0cmluZywgTGlicmVQcmFjdGljZT47XG4gIC8qKiBUaGUgZGV2aWNlcyB0aGF0IHRoZSB1c2VyIGhhcyBjb25uZWN0ZWQgdG8gdGhlIGFjY291bnQuICovXG4gIGRldmljZXM6IFJlY29yZDxzdHJpbmcsIExpYnJlRGV2aWNlPjtcbiAgY29uc2VudHM6IExpYnJlQ29uc2VudHM7XG59XG5cbmludGVyZmFjZSBMaWJyZUF1dGhUaWNrZXQge1xuICB0b2tlbjogc3RyaW5nO1xuICBleHBpcmVzOiBudW1iZXI7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBMaWJyZURhdGFNZXNzYWdlcyB7XG4gIHVucmVhZDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgTGlicmVOb3RpZmljYXRpb25zIHtcbiAgdW5yZXNvbHZlZDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgTGlicmVDb25zZW50cyB7XG4gIGxsdT86IExsdTtcbiAgcmVhbFdvcmxkRXZpZGVuY2U6IFJlYWxXb3JsZEV2aWRlbmNlO1xufVxuXG5pbnRlcmZhY2UgTGx1IHtcbiAgcG9saWN5QWNjZXB0OiBudW1iZXI7XG4gIHRvdUFjY2VwdDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgUmVhbFdvcmxkRXZpZGVuY2Uge1xuICBwb2xpY3lBY2NlcHQ6IG51bWJlcjtcbiAgdG91QWNjZXB0OiBudW1iZXI7XG4gIGhpc3Rvcnk6IHsgcG9saWN5QWNjZXB0OiBudW1iZXIsIGRlY2xpbmVkPzogYm9vbGVhbiB9W107XG59XG5cbmludGVyZmFjZSBMaWJyZVN5c3RlbSB7XG4gIG1lc3NhZ2VzOiBMaWJyZVN5c3RlbU1lc3NhZ2VzO1xufVxuXG5pbnRlcmZhY2UgTGlicmVTeXN0ZW1NZXNzYWdlcyB7XG4gIGFwcFJldmlld0Jhbm5lcjogbnVtYmVyO1xuICBmaXJzdFVzZVBob2VuaXg6IG51bWJlcjtcbiAgZmlyc3RVc2VQaG9lbml4UmVwb3J0c0RhdGFNZXJnZWQ6IG51bWJlcjtcbiAgbGx1R2V0dGluZ1N0YXJ0ZWRCYW5uZXI6IG51bWJlcjtcbiAgbGx1TmV3RmVhdHVyZU1vZGFsOiBudW1iZXI7XG4gIGxsdU9uYm9hcmRpbmc/OiBudW1iZXI7XG4gIGx2V2ViUG9zdFJlbGVhc2U6IHN0cmluZztcbiAgc3RyZWFtaW5nVG91ck1hbmRhdG9yeTogbnVtYmVyO1xufVxuXG4vKiogVGhlIHByYWN0aWNlIGZhY2lsaXR5IHRoYXQgY2FuIGFjY2VzcyB0aGUgdXNlcidzIGRhdGEuICovXG5pbnRlcmZhY2UgTGlicmVQcmFjdGljZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHByYWN0aWNlSWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBhZGRyZXNzMTogc3RyaW5nO1xuICBjaXR5OiBzdHJpbmc7XG4gIHN0YXRlOiBzdHJpbmc7XG4gIHppcDogc3RyaW5nO1xuICBwaG9uZU51bWJlcjogc3RyaW5nO1xuICByZWNvcmRzOiBudWxsO1xufVxuXG5pbnRlcmZhY2UgTGlicmVEZXZpY2Uge1xuICBpZDogc3RyaW5nO1xuICBuaWNrbmFtZTogc3RyaW5nO1xuICBzbjogc3RyaW5nO1xuICB0eXBlOiBudW1iZXI7XG4gIHVwbG9hZERhdGU6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIExpYnJlQWxhcm1SdWxlcyB7XG4gIGM6IGJvb2xlYW47XG4gIGg6IEg7XG4gIGY6IEY7XG4gIGw6IEY7XG4gIG5kOiBOZDtcbiAgcDogbnVtYmVyO1xuICByOiBudW1iZXI7XG4gIHN0ZDogU3RkO1xufVxuXG5pbnRlcmZhY2UgRiB7XG4gIHRoOiBudW1iZXI7XG4gIHRobW06IG51bWJlcjtcbiAgZDogbnVtYmVyO1xuICB0bDogbnVtYmVyO1xuICB0bG1tOiBudW1iZXI7XG4gIG9uPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEgge1xuICBvbjogYm9vbGVhbjtcbiAgdGg6IG51bWJlcjtcbiAgdGhtbTogbnVtYmVyO1xuICBkOiBudW1iZXI7XG4gIGY6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE5kIHtcbiAgaTogbnVtYmVyO1xuICByOiBudW1iZXI7XG4gIGw6IG51bWJlcjtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1pbnRlcmZhY2VcbmludGVyZmFjZSBTdGQge31cblxuZXhwb3J0IGludGVyZmFjZSBSYXdHbHVjb3NlUmVhZGluZyB7XG4gIEZhY3RvcnlUaW1lc3RhbXA6IHN0cmluZztcbiAgVGltZXN0YW1wOiBzdHJpbmc7XG4gIHR5cGU6IG51bWJlcjtcbiAgVmFsdWVJbk1nUGVyRGw6IG51bWJlcjtcbiAgVHJlbmRBcnJvdz86IG51bWJlcjtcbiAgVHJlbmRNZXNzYWdlPzogbnVsbDtcbiAgTWVhc3VyZW1lbnRDb2xvcjogbnVtYmVyO1xuICBHbHVjb3NlVW5pdHM6IG51bWJlcjtcbiAgVmFsdWU6IG51bWJlcjtcbiAgaXNIaWdoOiBib29sZWFuO1xuICBpc0xvdzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHbHVjb3NlUmVhZGluZyB7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgdmFsdWU6IG51bWJlcjtcbiAgbWVhc3VyZW1lbnRDb2xvcjogTWVhc3VyZW1lbnRDb2xvcjtcbiAgaXNIaWdoOiBib29sZWFuO1xuICBpc0xvdzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRpY2tldCB7XG4gIHRva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXM6IG51bWJlcjtcbiAgZHVyYXRpb246IG51bWJlcjtcbn1cblxuZXhwb3J0IGVudW0gTWVhc3VyZW1lbnRDb2xvciB7XG4gIFJlZCA9IDAsXG4gIEdyZWVuID0gMSxcbiAgWWVsbG93ID0gMixcbiAgT3JhbmdlID0gMyxcbn1cblxuZXhwb3J0IHR5cGUgVHJlbmRUeXBlID0gXCJOb3RDb21wdXRhYmxlXCIgfCBcIlNpbmdsZURvd25cIiB8IFwiRm9ydHlGaXZlRG93blwiIHwgXCJGbGF0XCIgfCBcIkZvcnR5Rml2ZVVwXCIgfCBcIlNpbmdsZVVwXCI7XG5cbmV4cG9ydCBlbnVtIFRyZW5kIHtcbiAgJ05vdENvbXB1dGFibGUnID0gMCxcbiAgJ1NpbmdsZURvd24nID0gMSxcbiAgJ0ZvcnR5Rml2ZURvd24nID0gMixcbiAgJ0ZsYXQnID0gMyxcbiAgJ0ZvcnR5Rml2ZVVwJyA9IDQsXG4gICdTaW5nbGVVcCcgPSA1LFxufVxuXG4vKipcbiAqIEF0dHJpYnV0aW9uIGZvciB0aGUgdHlwZXMuXG4gKiBAZGVzY3JpcHRpb24gVGhlIHR5cGVzIHdlcmUgYm9ycm93ZWQgZnJvbSB0aGUgRGlhS0VNIGxpYnJlLWxpbmstdXAtYXBpLWNsaWVudCBwcm9qZWN0LlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0RpYUtFTS9saWJyZS1saW5rLXVwLWFwaS1jbGllbnQvdHJlZS9tYWluL3NyYy90eXBlc31cbiAqIExpY2Vuc2U6IE1JVCBMaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vRGlhS0VNL2xpYnJlLWxpbmstdXAtYXBpLWNsaWVudC9ibG9iL21haW4vTElDRU5TRSlcbiAqLyIsCiAgImltcG9ydCB7IFRyZW5kLCBUcmVuZFR5cGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgVFJFTkRfTUFQOiBUcmVuZFtdID0gW1xuICAgIFRyZW5kLk5vdENvbXB1dGFibGUsXG4gICAgVHJlbmQuU2luZ2xlRG93bixcbiAgICBUcmVuZC5Gb3J0eUZpdmVEb3duLFxuICAgIFRyZW5kLkZsYXQsXG4gICAgVHJlbmQuRm9ydHlGaXZlVXAsXG4gICAgVHJlbmQuU2luZ2xlVXAsXG5dO1xuXG5leHBvcnQgY29uc3QgVFJFTkRfVFlQRV9NQVA6IFRyZW5kVHlwZVtdID0gW1xuICAgIFwiTm90Q29tcHV0YWJsZVwiLFxuICAgIFwiU2luZ2xlRG93blwiLFxuICAgIFwiRm9ydHlGaXZlRG93blwiLFxuICAgIFwiRmxhdFwiLFxuICAgIFwiRm9ydHlGaXZlVXBcIixcbiAgICBcIlNpbmdsZVVwXCIsXG5dOyIsCiAgImltcG9ydCB7IEdsdWNvc2VSZWFkaW5nIH0gZnJvbSBcIi4vcmVhZGluZ1wiO1xuaW1wb3J0IHsgUmF3R2x1Y29zZVJlYWRpbmcsIExpYnJlVXNlciwgTWVhc3VyZW1lbnRDb2xvciwgVHJlbmQgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG4vKipcbiAqIFBhcnNlIGEgTGlicmUgVXNlciBvYmplY3QuXG4gKiBAcGFyYW0gdXNlciBUaGUgdXNlciBvYmplY3QgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHVzZXIgb2JqZWN0LlxuICovXG5leHBvcnQgY29uc3QgcGFyc2VVc2VyID0gKHVzZXI6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBMaWJyZVVzZXIgPT4gKHtcbiAgICAuLi4odXNlciBhcyBMaWJyZVVzZXIpLFxuICAgIGNyZWF0ZWQ6IHBhcnNlVW5peFRpbWVzdGFtcCh1c2VyLmNyZWF0ZWQgYXMgdW5rbm93biBhcyBudW1iZXIpLFxuICAgIGxhc3RMb2dpbjogcGFyc2VVbml4VGltZXN0YW1wKHVzZXIubGFzdExvZ2luIGFzIHVua25vd24gYXMgbnVtYmVyKSxcbiAgICBkYXRlT2ZCaXJ0aDogcGFyc2VVbml4VGltZXN0YW1wKHVzZXIuZGF0ZU9mQmlydGggYXMgdW5rbm93biBhcyBudW1iZXIpLFxufSk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIFBhcnNlIHVuaXggdGltZXN0YW1wcyB0byBEYXRlIG9iamVjdHMuXG4gKiBAcGFyYW0gdGltZXN0YW1wIFRoZSB1bml4IHRpbWVzdGFtcCB0byBwYXJzZS5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgZGF0ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlVW5peFRpbWVzdGFtcCA9ICh0aW1lc3RhbXA6IG51bWJlcikgPT4gbmV3IERhdGUodGltZXN0YW1wICogMTAwMCk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIFBhcnNlIGEgZ2x1Y29zZSByZWFkaW5nLlxuICogQHBhcmFtIHJhd1JlYWRpbmcgVGhlIHJhdyBnbHVjb3NlIHJlYWRpbmcgY29taW5nIGZyb20gdGhlIHNlcnZlciB0byBwYXJzZS5cbiAqIEBwYXJhbSBjb25uZWN0aW9uIFRoZSBjb25uZWN0aW9uIG9iamVjdCB0byB1c2UgZm9yIHBhcnNpbmcuIFVzZWQgZm9yIGNhbGN1bGF0aW5nIGlzSGlnaCBhbmQgaXNMb3cuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGdsdWNvc2UgcmVhZGluZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlR2x1Y29zZVJlYWRpbmcgPSAocmF3UmVhZGluZzogUmF3R2x1Y29zZVJlYWRpbmcsIG9wdGlvbnM6IHsgdGFyZ2V0SGlnaDogbnVtYmVyLCB0YXJnZXRMb3c6IG51bWJlciB9KSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSByYXdSZWFkaW5nLlZhbHVlSW5NZ1BlckRsO1xuXG4gICAgLy8gISBDYWxjdWxhdGVzIHRoZSBpc0hpZ2ggYW5kIGlzTG93IHByb3BlcnRpZXMgYmFzZWQgb24gdGhlIHRhcmdldEhpZ2ggYW5kIHRhcmdldExvdyB2YWx1ZXMuIFRoZSB0d28gdmFsdWVzIGNvbWluZyBmcm9tIExpYnJlIExpbmsgVXAgc2VlbXMgdG8gYmUgaW5jb3JyZWN0LlxuICAgIGNvbnN0IGlzSGlnaCA9IG9wdGlvbnMudGFyZ2V0SGlnaCA8IHZhbHVlO1xuICAgIGNvbnN0IGlzTG93ID0gb3B0aW9ucy50YXJnZXRMb3cgPiB2YWx1ZTtcbiAgIFxuICAgIGNvbnN0IHBhcnNlZFJlYWRpbmcgPSBPYmplY3QuZnJlZXplKHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShyYXdSZWFkaW5nLlRpbWVzdGFtcCksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBtZWFzdXJlbWVudENvbG9yOiByYXdSZWFkaW5nLk1lYXN1cmVtZW50Q29sb3IgYXMgTWVhc3VyZW1lbnRDb2xvcixcbiAgICAgICAgaXNIaWdoLFxuICAgICAgICBpc0xvdyxcbiAgICAgICAgdHJlbmQ6IHBhcnNlVHJlbmQocmF3UmVhZGluZy5UcmVuZEFycm93KVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBhcnNlZFJlYWRpbmc7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIFNvcnQgYnkgdGltZXN0YW1wLlxuICogQHBhcmFtIGEgVGhlIGZpcnN0IGl0ZW0gdG8gY29tcGFyZS5cbiAqIEBwYXJhbSBiIFRoZSBzZWNvbmQgaXRlbSB0byBjb21wYXJlLlxuICogQHJldHVybnMgVGhlIGNvbXBhcmlzb24gcmVzdWx0LlxuICogXG4gKiBAZXhhbXBsZSBcbiAqIC5zb3J0KHNvcnRCeVRpbWVzdGFtcClcbiAqL1xuZXhwb3J0IGNvbnN0IHNvcnRCeVRpbWVzdGFtcCA9IChhOiBHbHVjb3NlUmVhZGluZywgYjogR2x1Y29zZVJlYWRpbmcpID0+IGEudGltZXN0YW1wLmdldFRpbWUoKSAtIGIudGltZXN0YW1wLmdldFRpbWUoKTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gUGFyc2UgdGhlIHRyZW5kIG9mIGdsdWNvc2UgcmVhZGluZy5cbiAqIEBwYXJhbSB0cmVuZCBUaGUgY3VycmVudCB0cmVuZC5cbiAqIEBwYXJhbSBkZWZhdWx0VHJlbmQgVGhlIGRlZmF1bHQgdHJlbmQgdG8gdXNlIGlmIHRyZW5kIGlzIHVuZGVmaW5lZC5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdHJlbmQuXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZVRyZW5kID0gKHRyZW5kOiBudW1iZXIgfCB1bmRlZmluZWQsIGRlZmF1bHRUcmVuZDogVHJlbmQgPSBUcmVuZC5GbGF0KSA9PiB0cmVuZCBhcyBUcmVuZCA/PyBkZWZhdWx0VHJlbmQ7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEdldCB0aGUgdHJlbmQgdHlwZSBvZiBnbHVjb3NlIHJlYWRpbmcuXG4gKiBAcGFyYW0gdHJlbmQgVGhlIGN1cnJlbnQgdHJlbmQuXG4gKiBAcGFyYW0gZGVmYXVsdFRyZW5kIFRoZSBkZWZhdWx0IHRyZW5kIHRvIHVzZSBpZiB0cmVuZCBpcyB1bmRlZmluZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJlbmQgdHlwZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFRyZW5kVHlwZSA9ICh0cmVuZDogbnVtYmVyIHwgdW5kZWZpbmVkLCBkZWZhdWx0VHJlbmQ6IFRyZW5kID0gVHJlbmQuRmxhdCkgPT4gVHJlbmRbcGFyc2VUcmVuZCh0cmVuZCwgZGVmYXVsdFRyZW5kKV07XG4iLAogICJpbXBvcnQgeyBHbHVjb3NlUmVhZGluZyB9IGZyb20gXCIuL3JlYWRpbmdcIjtcbmltcG9ydCB7IFJhd0dsdWNvc2VSZWFkaW5nLCBMaWJyZVVzZXIsIE1lYXN1cmVtZW50Q29sb3IsIFRyZW5kIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuLyoqXG4gKiBQYXJzZSBhIExpYnJlIFVzZXIgb2JqZWN0LlxuICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgb2JqZWN0IHRvIHBhcnNlLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB1c2VyIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlVXNlciA9ICh1c2VyOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogTGlicmVVc2VyID0+ICh7XG4gICAgLi4uKHVzZXIgYXMgTGlicmVVc2VyKSxcbiAgICBjcmVhdGVkOiBwYXJzZVVuaXhUaW1lc3RhbXAodXNlci5jcmVhdGVkIGFzIHVua25vd24gYXMgbnVtYmVyKSxcbiAgICBsYXN0TG9naW46IHBhcnNlVW5peFRpbWVzdGFtcCh1c2VyLmxhc3RMb2dpbiBhcyB1bmtub3duIGFzIG51bWJlciksXG4gICAgZGF0ZU9mQmlydGg6IHBhcnNlVW5peFRpbWVzdGFtcCh1c2VyLmRhdGVPZkJpcnRoIGFzIHVua25vd24gYXMgbnVtYmVyKSxcbn0pO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBQYXJzZSB1bml4IHRpbWVzdGFtcHMgdG8gRGF0ZSBvYmplY3RzLlxuICogQHBhcmFtIHRpbWVzdGFtcCBUaGUgdW5peCB0aW1lc3RhbXAgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGRhdGUuXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZVVuaXhUaW1lc3RhbXAgPSAodGltZXN0YW1wOiBudW1iZXIpID0+IG5ldyBEYXRlKHRpbWVzdGFtcCAqIDEwMDApO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBQYXJzZSBhIGdsdWNvc2UgcmVhZGluZy5cbiAqIEBwYXJhbSByYXdSZWFkaW5nIFRoZSByYXcgZ2x1Y29zZSByZWFkaW5nIGNvbWluZyBmcm9tIHRoZSBzZXJ2ZXIgdG8gcGFyc2UuXG4gKiBAcGFyYW0gY29ubmVjdGlvbiBUaGUgY29ubmVjdGlvbiBvYmplY3QgdG8gdXNlIGZvciBwYXJzaW5nLiBVc2VkIGZvciBjYWxjdWxhdGluZyBpc0hpZ2ggYW5kIGlzTG93LlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBnbHVjb3NlIHJlYWRpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZUdsdWNvc2VSZWFkaW5nID0gKHJhd1JlYWRpbmc6IFJhd0dsdWNvc2VSZWFkaW5nLCBvcHRpb25zOiB7IHRhcmdldEhpZ2g6IG51bWJlciwgdGFyZ2V0TG93OiBudW1iZXIgfSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gcmF3UmVhZGluZy5WYWx1ZUluTWdQZXJEbDtcblxuICAgIC8vICEgQ2FsY3VsYXRlcyB0aGUgaXNIaWdoIGFuZCBpc0xvdyBwcm9wZXJ0aWVzIGJhc2VkIG9uIHRoZSB0YXJnZXRIaWdoIGFuZCB0YXJnZXRMb3cgdmFsdWVzLiBUaGUgdHdvIHZhbHVlcyBjb21pbmcgZnJvbSBMaWJyZSBMaW5rIFVwIHNlZW1zIHRvIGJlIGluY29ycmVjdC5cbiAgICBjb25zdCBpc0hpZ2ggPSBvcHRpb25zLnRhcmdldEhpZ2ggPCB2YWx1ZTtcbiAgICBjb25zdCBpc0xvdyA9IG9wdGlvbnMudGFyZ2V0TG93ID4gdmFsdWU7XG4gICBcbiAgICBjb25zdCBwYXJzZWRSZWFkaW5nID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUocmF3UmVhZGluZy5UaW1lc3RhbXApLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgbWVhc3VyZW1lbnRDb2xvcjogcmF3UmVhZGluZy5NZWFzdXJlbWVudENvbG9yIGFzIE1lYXN1cmVtZW50Q29sb3IsXG4gICAgICAgIGlzSGlnaCxcbiAgICAgICAgaXNMb3csXG4gICAgICAgIHRyZW5kOiBwYXJzZVRyZW5kKHJhd1JlYWRpbmcuVHJlbmRBcnJvdylcbiAgICB9KTtcblxuICAgIHJldHVybiBwYXJzZWRSZWFkaW5nO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBTb3J0IGJ5IHRpbWVzdGFtcC5cbiAqIEBwYXJhbSBhIFRoZSBmaXJzdCBpdGVtIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gYiBUaGUgc2Vjb25kIGl0ZW0gdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIFRoZSBjb21wYXJpc29uIHJlc3VsdC5cbiAqIFxuICogQGV4YW1wbGUgXG4gKiAuc29ydChzb3J0QnlUaW1lc3RhbXApXG4gKi9cbmV4cG9ydCBjb25zdCBzb3J0QnlUaW1lc3RhbXAgPSAoYTogR2x1Y29zZVJlYWRpbmcsIGI6IEdsdWNvc2VSZWFkaW5nKSA9PiBhLnRpbWVzdGFtcC5nZXRUaW1lKCkgLSBiLnRpbWVzdGFtcC5nZXRUaW1lKCk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIFBhcnNlIHRoZSB0cmVuZCBvZiBnbHVjb3NlIHJlYWRpbmcuXG4gKiBAcGFyYW0gdHJlbmQgVGhlIGN1cnJlbnQgdHJlbmQuXG4gKiBAcGFyYW0gZGVmYXVsdFRyZW5kIFRoZSBkZWZhdWx0IHRyZW5kIHRvIHVzZSBpZiB0cmVuZCBpcyB1bmRlZmluZWQuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHRyZW5kLlxuICovXG5leHBvcnQgY29uc3QgcGFyc2VUcmVuZCA9ICh0cmVuZDogbnVtYmVyIHwgdW5kZWZpbmVkLCBkZWZhdWx0VHJlbmQ6IFRyZW5kID0gVHJlbmQuRmxhdCkgPT4gdHJlbmQgYXMgVHJlbmQgPz8gZGVmYXVsdFRyZW5kO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBHZXQgdGhlIHRyZW5kIHR5cGUgb2YgZ2x1Y29zZSByZWFkaW5nLlxuICogQHBhcmFtIHRyZW5kIFRoZSBjdXJyZW50IHRyZW5kLlxuICogQHBhcmFtIGRlZmF1bHRUcmVuZCBUaGUgZGVmYXVsdCB0cmVuZCB0byB1c2UgaWYgdHJlbmQgaXMgdW5kZWZpbmVkLlxuICogQHJldHVybnMgVGhlIHRyZW5kIHR5cGUuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRUcmVuZFR5cGUgPSAodHJlbmQ6IG51bWJlciB8IHVuZGVmaW5lZCwgZGVmYXVsdFRyZW5kOiBUcmVuZCA9IFRyZW5kLkZsYXQpID0+IFRyZW5kW3BhcnNlVHJlbmQodHJlbmQsIGRlZmF1bHRUcmVuZCldO1xuIiwKICAiaW1wb3J0IHsgVFJFTkRfVFlQRV9NQVAgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE1lYXN1cmVtZW50Q29sb3IsIFJhd0dsdWNvc2VSZWFkaW5nLCBUcmVuZCwgVHJlbmRUeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHBhcnNlR2x1Y29zZVJlYWRpbmcgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSBPYmplY3QuZnJlZXplKHtcbiAgICB0YXJnZXRIaWdoOiAxNTAsXG4gICAgdGFyZ2V0TG93OiA3MFxufSk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEEgZ2x1Y29zZSByZWFkaW5nIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgR2x1Y29zZVJlYWRpbmcge1xuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgdGltZXN0YW1wIG9mIHRoZSBnbHVjb3NlIHJlYWRpbmcuXG4gICAgICovXG4gICAgcHVibGljIHRpbWVzdGFtcDogRGF0ZTtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlIHZhbHVlIG9mIHRoZSBnbHVjb3NlIHJlYWRpbmcgaW4gbWcvZEwuXG4gICAgICovXG4gICAgcHVibGljIHZhbHVlOiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFRoZSBtZWFzdXJlbWVudCBjb2xvciBvZiB0aGUgZ2x1Y29zZSByZWFkaW5nLiBTZWUge0BsaW5rIE1lYXN1cmVtZW50Q29sb3J9LlxuICAgICAqL1xuICAgIHB1YmxpYyBtZWFzdXJlbWVudENvbG9yOiBNZWFzdXJlbWVudENvbG9yO1xuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRoZSBnbHVjb3NlIHJlYWRpbmcgaXMgaGlnaCwgYmFzZWQgb24gdGhlIHBhdGllbnQncyBzZXR0aW5ncy4gQ2FsY3VsYXRlZCBieSB0aGUgbGlicmFyeS5cbiAgICAgKi9cbiAgICBwdWJsaWMgaXNIaWdoOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRoZSBnbHVjb3NlIHJlYWRpbmcgaXMgbG93LCBiYXNlZCBvbiB0aGUgcGF0aWVudCdzIHNldHRpbmdzLiBDYWxjdWxhdGVkIGJ5IHRoZSBsaWJyYXJ5LlxuICAgICAqL1xuICAgIHB1YmxpYyBpc0xvdzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlIHRyZW5kIG9mIHRoZSBnbHVjb3NlIHJlYWRpbmcuIFNlZSB7QGxpbmsgVHJlbmR9LlxuICAgICAqL1xuICAgIHB1YmxpYyB0cmVuZDogVHJlbmQ7XG4gIFxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBfcmF3OiBSYXdHbHVjb3NlUmVhZGluZywgcHVibGljIF9vcHRpb25zOiB7IHRhcmdldEhpZ2g6IG51bWJlciwgdGFyZ2V0TG93OiBudW1iZXIgfSA9IERFRkFVTFRfT1BUSU9OUykge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUdsdWNvc2VSZWFkaW5nKF9yYXcsIF9vcHRpb25zKTtcblxuICAgICAgICB0aGlzLnZhbHVlID0gcGFyc2VkLnZhbHVlO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHBhcnNlZC50aW1lc3RhbXA7XG4gICAgICAgIHRoaXMubWVhc3VyZW1lbnRDb2xvciA9IHBhcnNlZC5tZWFzdXJlbWVudENvbG9yO1xuICAgICAgICB0aGlzLmlzSGlnaCA9IHBhcnNlZC5pc0hpZ2g7XG4gICAgICAgIHRoaXMuaXNMb3cgPSBwYXJzZWQuaXNMb3c7XG4gICAgICAgIHRoaXMudHJlbmQgPSBwYXJzZWQudHJlbmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFRoZSBtbW9sIHZhbHVlIG9mIHRoZSBnbHVjb3NlIHJlYWRpbmcuXG4gICAgICovXG4gICAgZ2V0IG1tb2woKSB7XG4gICAgICAgIHJldHVybiAodGhpcy52YWx1ZSAvIDE4KS50b0ZpeGVkKDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgbWcvZEwgdmFsdWUgb2YgdGhlIGdsdWNvc2UgcmVhZGluZy5cbiAgICAgKi9cbiAgICBnZXQgbWdEbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFRoZSB0eXBlIG9mIHRoZSB0cmVuZC4ge0BzZWUgVHJlbmRUeXBlfVxuICAgICAqL1xuICAgIGdldCB0cmVuZFR5cGUoKTogVHJlbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIFRSRU5EX1RZUEVfTUFQW3RoaXMudHJlbmRdO1xuICAgIH1cbn0iLAogICJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IEdsdWNvc2VSZWFkaW5nIH0gZnJvbSBcIi4vcmVhZGluZ1wiO1xuaW1wb3J0IHsgTGlicmVMaW5rVXBFbmRwb2ludHMsIExpYnJlTG9naW5SZXNwb25zZSwgTGlicmVSZXNwb25zZSwgTGlicmVSZWRpcmVjdFJlc3BvbnNlLCBMaWJyZVVzZXIsIExpYnJlQ29ubmVjdGlvbiwgTGlicmVDb25uZWN0aW9uUmVzcG9uc2UgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgcGFyc2VVc2VyIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuLyoqXG4gKiBBIGNsYXNzIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBMaWJyZSBMaW5rIFVwIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIExpYnJlTGlua0NsaWVudCB7XG4gIHByaXZhdGUgYXBpVXJsID0gY29uZmlnLmFwaVVybDtcbiAgcHJpdmF0ZSBhY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcGF0aWVudElkOiBzdHJpbmcgfCBudWxsID0gY29uZmlnLnBhdGllbnRJZCB8fCBudWxsO1xuXG4gIC8vIEEgY2FjaGUgZm9yIHN0b3JpbmcgZmV0Y2hlZCBkYXRhLlxuICBwcml2YXRlIGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG9wdGlvbnM6IExpYnJlTGlua0NsaWVudE9wdGlvbnMgPSBERUZBVUxUX09QVElPTlMpIHtcbiAgICBpZiAoIW9wdGlvbnM/LmVtYWlsICYmICFjb25maWcuY3JlZGVudGlhbHMuZW1haWwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMaWJyZSBMaW5rIFVwIGNyZWRlbnRpYWxzIGFyZSBtaXNzaW5nLlwiKTtcblxuICAgIGlmKG9wdGlvbnM/LnBhdGllbnRJZClcbiAgICAgIHRoaXMucGF0aWVudElkID0gb3B0aW9ucy5wYXRpZW50SWQ7XG5cbiAgICAvLyBNZXJnZSB0aGUgb3B0aW9ucyB3aXRoIHRoZSBkZWZhdWx0IG9wdGlvbnMuXG4gICAgdGhpcy5vcHRpb25zID0geyAuLi5ERUZBVUxUX09QVElPTlMsIC4uLm9wdGlvbnMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2V0IHRoZSB1c2VyIGRhdGEuIE9ubHkgYXZhaWxhYmxlIGFmdGVyIGxvZ2dpbmcgaW4uXG4gICAqL1xuICBwdWJsaWMgZ2V0IG1lKCk6IExpYnJlVXNlciB7XG4gICAgaWYoIXRoaXMuY2FjaGUuaGFzKFwidXNlclwiKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgZGF0YSBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgbG9nIGluIGZpcnN0LlwiKTtcblxuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChcInVzZXJcIik7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIExvZyBpbnRvIHRoZSBMaWJyZSBMaW5rIFVwIEFQSSB1c2luZyB0aGUgcHJvdmlkZWQgY3JlZGVudGlhbHMuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgbG9naW4oKTogUHJvbWlzZTxMaWJyZUxvZ2luUmVzcG9uc2U+IHtcbiAgICBjb25zdCBlbWFpbCA9IHRoaXMub3B0aW9ucz8uZW1haWwgfHwgY29uZmlnLmNyZWRlbnRpYWxzLmVtYWlsO1xuICAgIGNvbnN0IHBhc3N3b3JkID0gdGhpcy5vcHRpb25zPy5wYXNzd29yZCB8fCBjb25maWcuY3JlZGVudGlhbHMucGFzc3dvcmQ7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIHR5cGUgTG9naW5SZXNwb25zZSA9IExpYnJlTG9naW5SZXNwb25zZSB8IExpYnJlUmVkaXJlY3RSZXNwb25zZTtcbiAgICAgIFxuICAgICAgLy8gQXR0ZW1wdCB0byBsb2dpbiB0byB0aGUgTGlicmUgTGluayBVcCBBUEkuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2ZldGNoZXI8TG9naW5SZXNwb25zZT4oTGlicmVMaW5rVXBFbmRwb2ludHMuTG9naW4sIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gIFxuICAgICAgLy8gSWYgdGhlIHN0YXR1cyBpcyAyLCBtZWFucyB0aGUgY3JlZGVudGlhbHMgYXJlIGludmFsaWQuXG4gICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDIpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY3JlZGVudGlhbHMuIFBsZWFzZSBlbnN1cmUgdGhhdCB0aGUgZW1haWwgYW5kIHBhc3N3b3JkIHdvcmsgd2l0aCB0aGUgTGlicmVMaW5rVXAgYXBwLlwiKTtcblxuICAgICAgaWYoIXJlc3BvbnNlLmRhdGEpIFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkYXRhIHJldHVybmVkIGZyb20gTGlicmUgTGluayBVcCBBUEkuXCIpO1xuXG4gICAgICAvLyBJZiB0aGUgcmVzcG9uc2UgY29udGFpbnMgYSByZWRpcmVjdCwgdXBkYXRlIHRoZSByZWdpb24gYW5kIHRyeSBhZ2Fpbi5cbiAgICAgIGlmKFwicmVkaXJlY3RcIiBpbiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHRoaXMudmVyYm9zZShcIlJlZGlyZWN0aW5nIHRvIHJlZ2lvbjpcIiwgcmVzcG9uc2UuZGF0YS5yZWdpb24pO1xuICAgICAgICBjb25zdCByZWdpb25VcmwgPSBhd2FpdCB0aGlzLmZpbmRSZWdpb24ocmVzcG9uc2UuZGF0YS5yZWdpb24pO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIEFQSSBVUkwgd2l0aCB0aGUgcmVnaW9uIHVybC5cbiAgICAgICAgdGhpcy5hcGlVcmwgPSByZWdpb25Vcmw7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sb2dpbigpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGhlIGFjY2VzcyB0b2tlbiBmb3IgZnV0dXJlIHJlcXVlc3RzLlxuICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHJlc3BvbnNlLmRhdGEuYXV0aFRpY2tldD8udG9rZW47XG5cbiAgICAgIC8vIENhY2hlIHRoZSB1c2VyIGRhdGEgZm9yIGZ1dHVyZSB1c2UuIExvZyBpbiBhZ2FpbiB0byByZWZyZXNoIHRoZSB1c2VyIGRhdGEuXG4gICAgICB0aGlzLnNldENhY2hlKFwidXNlclwiLCBwYXJzZVVzZXIocmVzcG9uc2UuZGF0YS51c2VyKSk7XG5cbiAgICAgIHRoaXMudmVyYm9zZShcIkxvZ2dlZCBpbnRvIExpYnJlIExpbmsgVXAgQVBJLlwiKTtcblxuICAgICAgcmV0dXJuIHJlc3BvbnNlIGFzIExpYnJlTG9naW5SZXNwb25zZTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgY29uc3QgZXJyb3IgPSBlcnIgYXMgRXJyb3I7XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBsb2dnaW5nIGludG8gTGlicmUgTGluayBVcCBBUEkuICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFJlYWQgdGhlIGRhdGEgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuXG4gICAqIEByZXR1cm5zIFRoZSBsYXRlc3QgZ2x1Y29zZSBtZWFzdXJlbWVudCBmcm9tIHRoZSBMaWJyZSBMaW5rIFVwIEFQSS5cbiAgICovXG4gIHB1YmxpYyBhc3luYyByZWFkKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hSZWFkaW5nKCk7XG5cbiAgICAgIC8vIFBhcnNlIGFuZCByZXR1cm4gdGhlIGxhdGVzdCBnbHVjb3NlIGl0ZW0gZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICByZXR1cm4gbmV3IEdsdWNvc2VSZWFkaW5nKHJlc3BvbnNlLmRhdGE/LmNvbm5lY3Rpb24uZ2x1Y29zZUl0ZW0sIHJlc3BvbnNlLmRhdGEuY29ubmVjdGlvbik7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gZXJyIGFzIEVycm9yO1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgcmVhZGluZyBkYXRhIGZyb20gTGlicmUgTGluayBVcCBBUEkuICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFJlYWQgdGhlIGhpc3RvcnkgZGF0YSBmcm9tIHRoZSBMaWJyZSBMaW5rIFVwIEFQSS5cbiAgICovXG4gIHB1YmxpYyBhc3luYyBoaXN0b3J5KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hSZWFkaW5nKCk7XG5cbiAgICAgIGNvbnN0IGxpc3QgPSByZXNwb25zZS5kYXRhLmdyYXBoRGF0YS5tYXAoKGl0ZW0pID0+IG5ldyBHbHVjb3NlUmVhZGluZyhpdGVtLCByZXNwb25zZS5kYXRhLmNvbm5lY3Rpb24pKTtcblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gZXJyIGFzIEVycm9yO1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgcmVhZGluZyBkYXRhIGZyb20gTGlicmUgTGluayBVcCBBUEkuICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gU3RyZWFtIHRoZSByZWFkaW5ncyBmcm9tIHRoZSBMaWJyZSBMaW5rIFVwIEFQSS5cbiAgICAgKiBAcGFyYW0gaW50ZXJ2YWxNcyBUaGUgaW50ZXJ2YWwgYmV0d2VlbiBlYWNoIHJlYWRpbmcuIERlZmF1bHQgaXMgOTAgc2Vjb25kcy5cbiAgICAgKi9cbiAgcHVibGljIGFzeW5jICpzdHJlYW0oaW50ZXJ2YWxNcyA9IDEwMDAgKiA5MCkge1xuICAgIHdoaWxlICh0cnVlKSB7IC8vIEtlZXAgc3RyZWFtaW5nIHVudGlsIG1hbnVhbGx5IHN0b3BwZWRcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlYWRpbmcgPSBhd2FpdCB0aGlzLnJlYWQoKTtcbiAgICAgICAgeWllbGQgcmVhZGluZztcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGludGVydmFsTXMpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByZWFkaW5nOlwiLCBlcnJvcik7IFxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEZldGNoIHRoZSByZWFkaW5nIGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLiBVc2UgdG8gb2J0YWluIHRoZSByYXcgcmVhZGluZyBhbmQgbW9yZS5cbiAgICogQHJldHVybnMgVGhlIHJlc3BvbnNlIGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGZldGNoUmVhZGluZygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aWVudElkID0gYXdhaXQgdGhpcy5nZXRQYXRpZW50SWQoKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9mZXRjaGVyPExpYnJlQ29ubmVjdGlvblJlc3BvbnNlPihgJHtMaWJyZUxpbmtVcEVuZHBvaW50cy5Db25uZWN0aW9uc30vJHtwYXRpZW50SWR9L2dyYXBoYCk7XG5cbiAgICAgIHRoaXMudmVyYm9zZShcIkZldGNoZWQgcmVhZGluZyBmcm9tIExpYnJlIExpbmsgVXAgQVBJLlwiLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSwgbnVsbCwgMikpO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gZXJyIGFzIEVycm9yO1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZmV0Y2hpbmcgcmVhZGluZyBmcm9tIExpYnJlIExpbmsgVXAgQVBJLiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBHZXQgdGhlIGNvbm5lY3Rpb25zIGZyb20gdGhlIExpYnJlIExpbmsgVXAgQVBJLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGZldGNoQ29ubmVjdGlvbnMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmKHRoaXMuY2FjaGUuaGFzKFwiY29ubmVjdGlvbnNcIikpXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChcImNvbm5lY3Rpb25zXCIpO1xuXG4gICAgICAvLyBGZXRjaCB0aGUgY29ubmVjdGlvbnMgZnJvbSB0aGUgTGlicmUgTGluayBVcCBBUEkuXG4gICAgICBjb25zdCBjb25uZWN0aW9ucyA9IGF3YWl0IHRoaXMuX2ZldGNoZXIoTGlicmVMaW5rVXBFbmRwb2ludHMuQ29ubmVjdGlvbnMpO1xuXG4gICAgICB0aGlzLnZlcmJvc2UoYEZldGNoZWQgJHtjb25uZWN0aW9ucz8uZGF0YT8ubGVuZ3RofSBjb25uZWN0aW9ucyBmcm9tIExpYnJlIExpbmsgVXAgQVBJLmAsIEpTT04uc3RyaW5naWZ5KGNvbm5lY3Rpb25zLCBudWxsLCAyKSk7XG5cbiAgICAgIGlmKCEhY29ubmVjdGlvbnM/LmRhdGE/Lmxlbmd0aClcbiAgICAgICAgLy8gQ2FjaGUgdGhlIGNvbm5lY3Rpb25zIGZvciBmdXR1cmUgdXNlLlxuICAgICAgICB0aGlzLnNldENhY2hlKFwiY29ubmVjdGlvbnNcIiwgY29ubmVjdGlvbnMpO1xuXG4gICAgICByZXR1cm4gY29ubmVjdGlvbnM7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gZXJyIGFzIEVycm9yO1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZmV0Y2hpbmcgY29ubmVjdGlvbnMgZnJvbSBMaWJyZSBMaW5rIFVwIEFQSS4gJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2V0IHRoZSBwYXRpZW50IElEIGZyb20gdGhlIGNvbm5lY3Rpb25zLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXRQYXRpZW50SWQoKSB7XG4gICAgY29uc3QgY29ubmVjdGlvbnMgPSBhd2FpdCB0aGlzLmZldGNoQ29ubmVjdGlvbnMoKTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBjb25uZWN0aW9ucywgdGhyb3cgYW4gZXJyb3IuXG4gICAgaWYoIWNvbm5lY3Rpb25zLmRhdGE/Lmxlbmd0aClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNvbm5lY3Rpb25zIGZvdW5kLiBQbGVhc2UgZW5zdXJlIHRoYXQgeW91IGhhdmUgYSBjb25uZWN0aW9uIHdpdGggdGhlIExpYnJlTGlua1VwIGFwcC5cIik7XG5cbiAgICAvLyBHZXQgdGhlIHBhdGllbnQgSUQgZnJvbSB0aGUgY29ubmVjdGlvbnMsIG9yIGZhbGxiYWNrIHRvIHRoZSBmaXJzdCBjb25uZWN0aW9uLlxuXG4gICAgbGV0IHBhdGllbnRJZCA9IGNvbm5lY3Rpb25zLmRhdGFbMF0ucGF0aWVudElkO1xuXG4gICAgaWYodGhpcy5wYXRpZW50SWQpXG4gICAgICBjb25uZWN0aW9ucy5kYXRhLmZpbmQoXG4gICAgICAgIChjb25uZWN0aW9uOiBMaWJyZUNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24ucGF0aWVudElkID09PSB0aGlzLnBhdGllbnRJZFxuICAgICAgKT8ucGF0aWVudElkO1xuXG4gICAgaWYoIXBhdGllbnRJZClcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUGF0aWVudCBJRCBub3QgZm91bmQgaW4gY29ubmVjdGlvbnMuICgke3RoaXMucGF0aWVudElkfSlgKTtcblxuICAgIHRoaXMudmVyYm9zZShcIlVzaW5nIHBhdGllbnQgSUQ6XCIsIHBhdGllbnRJZCk7XG4gICAgcmV0dXJuIHBhdGllbnRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gRmluZCB0aGUgcmVnaW9uIGluIHRoZSBMaWJyZSBMaW5rIFVwIEFQSS4gVGhpcyBpcyB1c2VkIHdoZW4gdGhlIEFQSSByZXR1cm5zIGEgcmVkaXJlY3QuXG4gICAqIEBwYXJhbSByZWdpb24gVGhlIHJlZ2lvbiB0byBmaW5kLlxuICAgKiBAcmV0dXJucyBUaGUgc2VydmVyIFVSTCBmb3IgdGhlIHJlZ2lvbi5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmluZFJlZ2lvbihyZWdpb246IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2ZldGNoZXIoTGlicmVMaW5rVXBFbmRwb2ludHMuQ291bnRyeSk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIHJlZ2lvbiBpbiB0aGUgcmVzcG9uc2UuXG4gICAgICBjb25zdCBsc2xBcGkgPSByZXNwb25zZS5kYXRhPy5yZWdpb25hbE1hcFtyZWdpb25dPy5sc2xBcGk7XG5cbiAgICAgIGlmKCFsc2xBcGkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZ2lvbiBub3QgZm91bmQgaW4gTGlicmUgTGluayBVcCBBUEkuXCIpO1xuXG4gICAgICByZXR1cm4gbHNsQXBpO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGVyciBhcyBFcnJvcjtcblxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGZpbmRpbmcgcmVnaW9uIGluIExpYnJlIExpbmsgVXAgQVBJLiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBBIGdlbmVyaWMgZmV0Y2hlciBmb3IgdGhlIExpYnJlIExpbmsgVXAgQVBJLlxuICAgKiBAcGFyYW0gZW5kcG9pbnRcbiAgICogQHBhcmFtIG9wdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgX2ZldGNoZXI8VCA9IExpYnJlUmVzcG9uc2U+KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0geyBoZWFkZXJzOiB7fSB9KSB7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgIEF1dGhvcml6YXRpb246IHRoaXMuYWNjZXNzVG9rZW4gPyBgQmVhcmVyICR7dGhpcy5hY2Nlc3NUb2tlbn1gIDogXCJcIixcbiAgXG4gICAgICAvLyBMaWJyZSBMaW5rIFVwIEFQSSBoZWFkZXJzXG4gICAgICBwcm9kdWN0OiAnbGx1LmFuZHJvaWQnLFxuICAgICAgdmVyc2lvbjogY29uZmlnLmxsdVZlcnNpb24sXG4gIFxuICAgICAgJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwJyxcbiAgICAgICdjYWNoZS1jb250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgIGNvbm5lY3Rpb246ICdLZWVwLUFsaXZlJyxcbiAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnM6IEZldGNoUmVxdWVzdEluaXQgPSBPYmplY3QuZnJlZXplKHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5hcGlVcmx9LyR7ZW5kcG9pbnR9YCxcbiAgICAgICAgcmVxdWVzdE9wdGlvbnNcbiAgICAgICk7XG5cbiAgICAgIHRoaXMudmVyYm9zZShcbiAgICAgICAgYFske2VuZHBvaW50fV0gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgLFxuICAgICAgICBgUmVzcG9uc2UgZnJvbSBMaWJyZSBMaW5rIFVwIEFQSWAsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLCBudWxsLCAyKVxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDQyOSlcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHdhaXQgYmVmb3JlIHRyeWluZyBhZ2Fpbi5cIik7XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBFcnJvciBmZXRjaGluZyBkYXRhIGZyb20gTGlicmUgTGluayBVcCBBUEkuIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgVDtcblxuICAgICAgdGhpcy52ZXJib3NlKFxuICAgICAgICBgWyR7ZW5kcG9pbnR9XWAsXG4gICAgICAgIGBEYXRhIGZyb20gTGlicmUgTGluayBVcCBBUElgLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGVyciBhcyBFcnJvcjtcblxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGZldGNoaW5nIGNvbm5lY3Rpb25zIGZyb20gTGlicmUgTGluayBVcCBBUEkuICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEEgdmVyYm9zZSBsb2dnZXIuXG4gICAqIEBwYXJhbSBhcmdzXG4gICAqL1xuICBwcml2YXRlIHZlcmJvc2UoLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAoY29uZmlnLnZlcmJvc2UpIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDYWNoZSBhIHZhbHVlLCBpZiBjYWNoaW5nIGlzIGVuYWJsZWQuXG4gICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBjYWNoZSB0aGUgdmFsdWUgdW5kZXIuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gICAqL1xuICBwcml2YXRlIHNldENhY2hlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgaWYoIXRoaXMub3B0aW9ucy5jYWNoZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5jYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIENsZWFyIHRoZSBjYWNoZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhckNhY2hlKCkge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgTGlicmVMaW5rQ2xpZW50T3B0aW9ucyB7XG4gIGVtYWlsPzogc3RyaW5nO1xuICBwYXNzd29yZD86IHN0cmluZztcbiAgcGF0aWVudElkPzogc3RyaW5nO1xuICBjYWNoZT86IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfT1BUSU9OUzogTGlicmVMaW5rQ2xpZW50T3B0aW9ucyA9IHtcbiAgY2FjaGU6IHRydWUsXG59OyIKICBdLAogICJtYXBwaW5ncyI6ICJBQUNBLElBQU0sRUFBcUIsU0FBUyxLQUFLLG9CQUFzQiw4QkFDekQsRUFBbUIsU0FBUyxLQUFLLGlCQUNqQyxFQUFzQixTQUFTLEtBQUssb0JBQ3BDLEVBQXdCLFNBQVMsS0FBSyx1QkFBeUIsUUFDL0QsRUFBd0IsU0FBUyxLQUFLLHNCQUN0QyxFQUFVLFNBQVMsS0FBSyxVQUFZLE9BSzdCLEVBQVMsT0FBTyxPQUFPLENBQ2hDLE9BQVEsRUFDUixVQUFXLEVBQ1gsWUFBYSxDQUNULE1BQU8sRUFDUCxTQUFVLENBQ2QsRUFDQSxXQUFZLEVBQ1osUUFBUyxDQUNiLENBQUNBQ3BCTSxJQUFLLEVBQUwsVUFBSyxFQUFMLENBQ0wsV0FBUSxpQkFD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LE1BQU0seUNBQXlDLEtBQUssWUFBWSxFQUc1RSxPQURBLEtBQUssUUFBUSxvQkFBcUIsQ0FBUyxFQUNwQyxPQVFLLFdBQVUsQ0FBQyxFQUFnQixDQUN2QyxHQUFJLENBSUYsTUFBTSxHQUhXLE1BQU0sS0FBSyxTQUFTLEVBQXFCLE9BQU8sR0FHekMsTUFBTSxZQUFZLElBQVMsT0FFbkQsSUFBSSxFQUNGLE1BQU0sSUFBSSxNQUFNLHdDQUF3QyxFQUUxRCxPQUFPLFFBQ0QsRUFBTixDQUNBLE1BQU0sRUFBUSxFQUdkLE1BREEsUUFBUSxNQUFNLENBQUssRUFDYixJQUFJLE1BQU0sOENBQThDLEVBQU0sU0FBUyxRQVNuRSxTQUEyQixDQUFDLEVBQWtCLEVBQXVCLENBQUUsUUFBUyxDQUFDLENBQUUsRUFBRyxDQUNsRyxNQUFNLEVBQVUsSUFBSSxRQUFRLElBQ3ZCLEVBQVEsUUFDWCxjQUFlLEtBQUssWUFBYyxVQUFVLEtBQUssY0FBZ0IsR0FHakUsUUFBUyxjQUNULFFBQVMsRUFBTyxXQUVoQixrQkFBbUIsT0FDbkIsZ0JBQWlCLFdBQ2pCLFdBQVksYUFDWixlQUFnQixrQkFDbEIsQ0FBQyxFQUVLLEVBQW1DLE9BQU8sT0FBTyxJQUNsRCxFQUNILFNBQ0YsQ0FBQyxFQUVELEdBQUksQ0FDRixNQUFNLEVBQVcsTUFBTSxNQUNyQixHQUFHLEtBQUssVUFBVSxJQUNsQixDQUNGLEVBUUEsR0FOQSxLQUFLLFFBQ0gsSUFBSSxPQUFjLEVBQVMsVUFDM0Isa0NBQ0EsS0FBSyxVQUFVLEVBQVUsS0FBTSxDQUFDLENBQ2xDLEdBRUssRUFBUyxHQUFJLENBQ2hCLEdBQUcsRUFBUyxTQUFXLElBQ3JCLE1BQU0sSUFBSSxNQUFNLHFEQUFxRCxFQUV2RSxNQUFNLElBQUksTUFDUix1REFBdUQsRUFBUyxRQUNsRSxFQUdGLE1BQU0sRUFBUSxNQUFNLEVBQVMsS0FBSyxFQVFsQyxPQU5BLEtBQUssUUFDSCxJQUFJLEtBQ0osOEJBQ0EsS0FBSyxVQUFVLEVBQU0sS0FBTSxDQUFDLENBQzlCLEVBRU8sUUFDQSxFQUFQLENBQ0EsTUFBTSxFQUFRLEVBR2QsTUFEQSxRQUFRLE1BQU0sQ0FBSyxFQUNiLElBQUksTUFBTSxzREFBc0QsRUFBTSxTQUFTLEdBUWpGLE9BQU8sSUFBSSxFQUFhLENBQzlCLEdBQUksRUFBTyxRQUFTLFFBQVEsSUFBSSxHQUFHLENBQUksRUFRakMsUUFBUSxDQUFDLEVBQWEsRUFBWSxDQUN4QyxJQUFJLEtBQUssUUFBUSxNQUFPLE9BRXhCLEtBQUssTUFBTSxJQUFJLEVBQUssQ0FBSyxFQU1wQixVQUFVLEVBQUcsQ0FDbEIsS0FBSyxNQUFNLE1BQU0sRUFFckIsQ0FTQSxJQUFNLEVBQTBDLENBQzlDLE1BQU8sRUFDVCIsCiAgImRlYnVnSWQiOiAiOEQ5Mjk3Q0MyQUU4MTRGRjY0NzU2ZTIxNjQ3NTZlMjEiLAogICJuYW1lcyI6IFtdCn0=
